---
layout: post
title: 关于CUT-IN 数据分析的一些思考
category: blog
tags: 自动驾驶  CUT-IN 测试场景  数据
hidden: false
lang: zh
---

最近有机会获得了一些高速公路、城区快速路以及城市高架上人类驾驶车辆进行CUT-IN驾驶任务的行驶数据。在对这些数据进行分析和探索的过程中，对CUT-IN场景下，车辆行驶数据有一些思考和体会。虽然未参与数据的采集过程，但是通过获得融合后的数据，可以推测出数据采集过程中采用了加速度传感器、高清摄像头、惯导仪器以及GPS。当然，除此之外，从刹车和油门量可以推断这部分数据来自车载的CAN。

按照数据分析的基本套路，首先对数据各项属性的统计参数进行了分析，检查一下样本的可用性和合理性。查看了一下样本中数度的分布情况，并绘制了不同道路类型下车辆行驶速度的HISTOGRAM，高速与城区快速路和高架的分布有着较为明显的区别，峰值位置对应的速度明显要高出很多。城区快速路和高架的峰值对应速度较为接近。但是从速度的分布情况来看，高架的速度均值要略微偏高。对于高速、城区快速路以及高架这三种城市道路场景，速度是一个较好的属性，能够反映这三种道路场景各自的特征。除此之外纵横向加速度也是一个能够对这三种场景中特征进行描述的属性。数据结果表明，在高速公路上行驶时，车辆横向加速度的幅值更大。当速度越快时，人类驾驶员为了让自己的视觉感官感受到安全，在PASSING BY时，应该会预留出更多的安全距离。 我想这也是为什么高速公路上车辆的横向加速度值的幅值会更大。

	
目前，大部分L2、L3自驾车的功能目标还处于较为底层的阶段，即:保证车辆在驾驶过程中的安全。国际上对自动驾驶车辆安全功能的评价描述大致为：不发生能够遇见和阻止的事故。SAKURA项目中也采用TTC- (Time to collision) 这一较为流行的车辆碰撞评价指标来协助评价自动驾驶汽车的安全功能。在阅读过一些关于TTC的文献后，与同事讨论了一下车辆在CUT-IN过程中保证安全的逻辑。车辆在整个驾驶过程中主要通过纵向和横向的距离来保证本车与其它交通参与车辆的距离。当车辆在同一车道上行驶时，为了达到安全的目的，驾驶员一般会保持车辆纵向安全距离。在PASSING BY过程中，车辆之间的纵向安全距离消失，但是车辆之间仍然保持了安全距离。这是因为在纵向安全距离消失的同时，车辆的横向安全距离开始增大（车辆由同一车道变为相邻车道）。因此，在评价车辆CUT-IN 过程是否安全时，应该同时考虑车辆的纵向和横向安全TTC。因此，在对CUT-IN数据进行分析时，我分别通过采集的原始数据，计算了纵向与横向的TTC，并将样本点绘制于纵向和横向TTC两个维度的坐标系下。因为，车辆行驶数据的保密性，无法展示绘制的散点图。刚开始的思路是采用KMEANS的算法来探索样本数据的分类情况。例如：是否可以直接通过纵横向的TTC数据将样本划分为 危险、中等和安全几个类型。但是，在绘制出散点图之后，我发现一个有趣的现象。坐标原点附近出现了一个空洞，也就是所有的数据都是围绕着这个空洞进行分布的。仔细一想就发现其中的原因。车辆数据采集过程中一直都是保持安全行驶。尽管因为天气、交通情况等复杂的因素，车辆的动力参数会存在一定的离散性，但是，一定会让TTC保持在一个临界值之上。若干TTC小于某个临界值，意味着事故的发生。这次数据量大概在3、4万条左右，样本数量还是很有限。假定本次样本的量已经足够大，那么可以认为中间空洞的边界为TTC的安全边界。通过真实数据的支撑可以得出TTC的安全临界值。从图中发现，空洞是一个类似菱形的图案。该团案纵向的半轴长即为无横向安全空间时纵向的临界TTC值，横向的半轴长即为无纵向安全距离的情况下，横向安全距离的临界TTC值。根据测试数据统计，纵向的TTC临界值相比横向的TTC临界值更大，大约为其4倍。这和日常驾驶过程中观察到的情况较为吻合。数据结果表明，不同道路场景中，都存在这一现象。当然具体取值会有所不同。

在进行CUT-IN场景安全性分析时，对这一数据规律的理解应该能帮助我更好地建立数学模型。
